<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Text Editor</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<style>
    .draggable  input {
    width: calc(100% - 20px);
    background: transparent;
    height: 100%;
    border: none;
    margin: 0 10px;
}
    .editor {
        border: 1px solid #ccc;
        min-height: 300px;
        padding: 10px;
        margin-bottom: 20px;
        position: relative;
    }
    .ui-widget-content {
        border: 1px solid #ccc;
        background: #f9f9f9;
        color: #333;
        padding: 5px;
        margin-bottom: 5px;
        position: absolute;
    }
    .selected {
        border: 2px solid blue !important;
        outline: none;
    }
    .draggable img {
        max-width: 100%;
        max-height: 100%;
    }
    .draggable select, .draggable input[type="radio"], .draggable input[type="checkbox"], .draggable p {
        width: auto;
        max-width: 100%;
    }
    .option-input {
        margin-bottom: 5px;
    }
</style>
</head>
<body>

<div class="container-fluid">
    <h1>Custom Text Editor</h1>
    <div class="editor" id="editor">
        <!-- This is your editable area where you can add text and elements -->
    </div>
    <button class="btn btn-primary" id="add-image-btn">Add Image</button>
    <button class="btn btn-primary" onclick="addText()">Add Text</button>
    <button class="btn btn-primary" onclick="addInputField()">Add Input Field</button>
    <!-- <button class="btn btn-primary" onclick="addSelectField()">Add Select Field</button> -->
    <button class="btn btn-primary" onclick="addRadioField()">Add Radio Field</button>
    <button class="btn btn-primary" onclick="addCheckboxField()">Add Checkbox Field</button>
    <div>
        <button class="btn btn-secondary" id="bold-btn"><b>B</b></button>
        <button class="btn btn-secondary" id="italic-btn"><i>I</i></button>
        <button class="btn btn-secondary" id="underline-btn"><u>U</u></button>
        <button class="btn btn-secondary" onclick="alignLeft()">Align Left</button>
        <button class="btn btn-secondary" onclick="alignCenter()">Align Center</button>
        <button class="btn btn-secondary" onclick="alignRight()">Align Right</button>
        <button class="btn btn-secondary" onclick="toggleList()">Toggle List</button>
        <button class="btn btn-danger" onclick="deleteElement()">Delete</button>
    </div>
    <div>
        <label for="text-color">Text Color:</label>
        <input type="color" id="text-color">
        <label for="bg-color">Background Color:</label>
        <input type="color" id="bg-color">
    </div>
    <div>
        <label for="text-size">Text Size:</label>
        <input type="number" id="text-size" min="8" max="100" value="16">
    </div>
    <div>
        <label for="border-width">Border Width:</label>
        <input type="number" id="border-width" min="0" max="10" value="0">
        <label for="border-style">Border Style:</label>
        <select id="border-style">
            <option value="none">None</option>
            <option value="solid">Solid</option>
            <option value="dashed">Dashed</option>
            <option value="dotted">Dotted</option>
            <option value="double">Double</option>
        </select>
    </div>
    <div>
        <input type="file" id="image-upload" accept="image/*" style="display: none;">
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script>
    $(document).ready(function() {
        $('.editor').on('click', '.draggable', function() {
            $('.draggable').removeClass('selected');
            $(this).addClass('selected');
        });

        $('#text-color').change(function() {
            $('.selected').css('color', $(this).val());
        });

        $('#bg-color').change(function() {
            $('.selected').css('background-color', $(this).val());
        });

        $('#text-size').change(function() {
            $('.selected').css('font-size', $(this).val() + 'px');
        });

        $('#border-width').change(function() {
            $('.selected').css('border-width', $(this).val() + 'px');
        });

        $('#border-style').change(function() {
            $('.selected').css('border-style', $(this).val());
        });

        $('#image-upload').change(function() {
            var input = this;
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    $('#editor').append('<div class="draggable resizable"><img src="' + e.target.result + '" alt="Uploaded Image" contenteditable="false"></div>');
                    makeDraggableResizable();
                };
                reader.readAsDataURL(input.files[0]);
            }
        });

        $('#add-image-btn').click(function() {
            $('#image-upload').click();
        });

        // Bold text functionality
        $('#bold-btn').click(function() {
            document.execCommand('bold');
        });

        // Italic text functionality
        $('#italic-btn').click(function() {
            document.execCommand('italic');
        });

        // Underline text functionality
        $('#underline-btn').click(function() {
            document.execCommand('underline');
        });
    });

    function addText() {
        $('#editor').append('<p class="draggable resizable" contenteditable="true">Text goes here</p>');
        makeDraggableResizable();
    }

    function addInputField() {
        $('#editor').append('<div class="draggable resizable"><input type="text" placeholder="Input Field" contenteditable="true"></div>');
        makeDraggableResizable();
    }

    // function addSelectField() {
    //     var selectField = '<div class="draggable resizable" contenteditable="true"><select>';
    //     selectField += '<option value="option1">Option 1</option>';
    //     selectField += '<option value="option2">Option 2</option>';
    //     selectField += '</select>';
    //     selectField += '<button class="add-option">Add Option</button>';
    //     selectField += '</div>';
    //     $('#editor').append(selectField);
    //     makeDraggableResizable();
    //     $('.add-option').click(function() {
    //         $(this).prev('select').append('<option>New Option</option>');
    //     });
    // }

    function addRadioField() {
        $('#editor').append('<div class="draggable resizable" contenteditable="true"><input type="radio" name="radioGroup"> Radio 1<br><input type="radio" name="radioGroup"> Radio 2</div>');
        makeDraggableResizable();
    }

    function addCheckboxField() {
        $('#editor').append('<div class="draggable resizable" contenteditable="true"><input type="checkbox"> Checkbox 1<br><input type="checkbox"> Checkbox 2</div>');
        makeDraggableResizable();
    }

    function makeDraggableResizable() {
        $('.draggable').draggable({
            scroll: false
        }).resizable();
    }

    function toggleBold() {
        document.execCommand('bold');
    }

    function toggleItalic() {
        document.execCommand('italic');
    }

    function toggleUnderline() {
        document.execCommand('underline');
    }

    function toggleList() {
        document.execCommand('insertUnorderedList');
    }

    function alignLeft() {
        document.execCommand('justifyLeft');
    }

    function alignCenter() {
        document.execCommand('justifyCenter');
    }

    function alignRight() {
        document.execCommand('justifyRight');
    }

    function deleteElement() {
        $('.selected').remove();
    }
</script>

</body>
</html>
